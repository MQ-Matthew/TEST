<!--工作经历 table -->
<table cellspacing="0" class="table table-bordered table-condensed" style="width: 100%;">
    <thead>
    <th colspan="8">工作经历 ：</th>
    <tr>
        
        <th width="12%">起始时间</th>
        <th width="12%">结束时间</th>
        <th width="21%">工作单位</th>
        <th width="18%">工作部门</th>
        <th width="10%">工作职务</th>
        <th width="12%">备注</th>
        <th width="10%">操作</th>
    </tr>
    </thead>

    <empty name="workinfo">
        <tbody id='all_gongzuos'>  <!--添加-->
        <tr name="wk">
            <td><input type="hidden" name="work_id[]" id="work_id" value="">
                <input type="text" name="work_start[]" id="work_start"  class="form-control input-date" value=""  style="width:100%"> </td>
            <td><input type="text" name="work_end[]" id="work_end"  class="form-control input-date" value=""  style="width:100%"> </td>

            <td><input type="text" name="work_company[]" id="work_company"  value=""  style="width:100%"> </td>
            <td><input type="text" name="work_dep[]" id="work_dep"  value=""  style="width:100%"></td>

            <td><input type="text" name="work_pos[]" id="work_pos"  value=""  style="width:100%"></td>

            <td><input type="text" name="work_remark[]" id="work_remark"  value=""  style="width:100%"></td>

            <td><a href="javascript:void(0);" onclick="delete_trs('wk')" class="delrow">删除</a></td>
        </tr>
        <!-- <tr id='gongzuos'></tr> -->
        <tr name="wk">
            <td colspan="4">
                <div class="form-group">
                    <label class="col-sm-2 control-label" >上传工作经历附件：</label>
                    <div class="col-sm-10">
                        {:W('FileUpload/add',array('work_add_file[]',$data['id'].$data['work_status']))}
                    </div>
                </div>
            </td>
        </tr>
        </tbody>


        <else />

        <tbody id='all_gongzuos'> <!--编辑-->
        <volist name="workinfo" id="data">
            <tr name="{$data.id}{$data.work_status}">
            <td><input type="hidden" name="work_id[]" id="work_id" value="{$data.id}">
                <input type="text" name="work_start[]" id="work_start"  class="form-control input-date" value="{$data.work_start}"  style="width:100%"> </td>
            <td><input type="text" name="work_end[]" id="work_end"  class="form-control input-date" value="{$data.work_end}"  style="width:100%"> </td>

            <td><input type="text" name="work_company[]" id="work_company"  value="{$data.work_company}"  style="width:100%"> </td>
            <td><input type="text" name="work_dep[]" id="work_dep"  value="{$data.work_dep}"  style="width:100%"></td>

            <td><input type="text" name="work_pos[]" id="work_pos"  value="{$data.work_pos}"  style="width:100%"></td>

            <td><input type="text" name="work_remark[]" id="work_remark"  value="{$data.work_remark}"  style="width:100%"></td>

            <td><a href="javascript:void(0);" onclick="delete_trs({$data.id}{$data.work_status})" class="delrow">删除</a></td>
        </tr>
        <tr name="{$data.id}{$data.hj_status}">

                <td colspan="5">

                    <empty name="data.work_add_file">
                       {:W('FileUpload/add',array('work_add_file[]',$data['id'].$data['work_status']))}
                       <else/>
                       
                       {:W('FileUpload/edit',array('work_add_file[]'=>$data['work_add_file'],'work_add_file[]',$data['id'].$data['work_status']))}
                       
                   </empty>



               </td>
               
           </tr>
            <tr class="backgroundcolor"><td colspan="3"></td></tr>
        </volist>
        </tbody>

    </empty>

    <tr>
        <td><button id="wk_goods" class="btn btn-small btn-success" type="button" onclick="gongzuo_tbAddRow()">添加工作经历</button></td>
        <td colspan="10"></td>
    </tr>

</table>
<input type="hidden" id="gongzuo" name="gongzuo" value="{$info.gongzuo}">
<!--工作经历 js -->
<script type="text/javascript">
    //添加一行
    function gongzuo_tbAddRow()
    {

        var gongzuo_html = '';
        gongzuo_html += '<tr>';

        gongzuo_html += '<td><input type="hidden" name="work_id[]" id="work_id" value=""><input type="text" name="gongzuo_qishishijian[]" id="gongzuo_qishishijian"  class="form-control input-date" value="" onchange="gongzuo_tableDate();" style="width:100%"> </td>';
        gongzuo_html += '<td><input type="text" name="gongzuo_jieshushijian[]" id="gongzuo_jieshushijian"  class="form-control input-date" value="" onchange="gongzuo_tableDate();" style="width:100%"> </td>';

        gongzuo_html += '<td><input type="text" name="gongzuo_danwei[]" id="gongzuo_danwei"  value="" onblur="gongzuo_tableDate();" style="width:100%"> </td>';
        gongzuo_html += '<td><input type="text" name="gongzuo_bumeng[]" id="gongzuo_bumeng"  value="" onblur="gongzuo_tableDate();" style="width:100%"></td>';
        gongzuo_html += '<td><input type="text" name="gongzuo_zhiwu[]" id="gongzuo_zhiwu"  value="" onblur="gongzuo_tableDate();" style="width:100%"></td>';

        gongzuo_html += '<td><input type="text" name="gongzuo_beizhu[]" id="gongzuo_beizhu"  value="" onblur="gongzuo_tableDate();" style="width:100%"></td>';

        gongzuo_html += '<td><a href="javascript:void(0);" onclick="delete_gongzuos(this)" class="delrow">删除</a></td>';
        gongzuo_html += '</tr>';

        // $('#wk_goods').before(gongzuo_html);
        $('#wk_goods').parent().parent().before(gongzuo_html);


        $(document).ready(function() {

            $('.input-date').datetimepicker({
                format : 'yyyy-mm-dd',
                minView: "month",
                locale : 'zh-cn',
                //locale: moment.locale('zh-cn'),
                ignoreReadonly : true,
                autoclose: 1,
                widgetPositioning : {
                    horizontal : 'auto',
                    vertical : 'bottom'
                },
            });

            $(".input-daterange input").datetimepicker({
                format : "yyyy-mm-dd",
                locale : 'zh-cn',
                minView: "month",
                showTodayButton : true,
                showClose : true,
                ignoreReadonly : true,
                widgetPositioning : {
                    horizontal : 'auto',
                    vertical : 'bottom'
                },
            });

            $("#start_date").on("dp.change", function(e) {
                if ($("#end_date").length > 0) {
                    $('#end_date').data("DateTimePicker").minDate(e.date);
                }
            });

            $("#end_date").on("dp.change", function(e) {
                if ($("#start_date").length > 0) {
                    $('#start_date').data("DateTimePicker").maxDate(e.date);
                }
            });

            $(".input-date-time").datetimepicker({
                format : 'yyyy-mm-dd',
                locale : 'zh',
                minView: "month",
                sideBySide : true,
                autoclose: 1,
                showTodayButton : true,
                showClose : true,
                ignoreReadonly : true,
                widgetPositioning : {
                    horizontal : 'auto',
                    vertical : 'bottom'
                },
            });

        });
        

    }

    //删除一行
    function delete_gongzuos(obj)
    {
        $(obj).parent().parent().remove();//删除一个物品对象
        gongzuo_tableDate();
    }



</script>










